<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Psychic Game (Basic)</title>
</head>

<body>
    <h1>The Psychic Game</h1>
    <p>Guess what letter I'm thinking of</p>
    <span>Wins: </span><span id="p-wins"></span><br>
    <span>Losses: </span><span id="p-los"></span><br>
    <span>Guesses left: </span><span id="p-left"></span><br>
    <span>Your guesses so far: </span><span id="p-guess"></span><br>

    <script>
        'use strict'
        var wins = 0;
        var losses = 0;
        var left = 9;
        var alph = "abcdefghijklmnopqrstuvwxyz";
        var sofar = "";
        var pWins = document.getElementById("p-wins");
        var pLoss = document.getElementById("p-los");
        var pLeft = document.getElementById("p-left");
        var pGuess = document.getElementById("p-guess");
        pWins.innerHTML = wins;
        pLoss.innerHTML = losses;
        pLeft.innerHTML = left;
        // Generates random index
        var randIndex = Math.floor(Math.random() * alph.length);
        // Using the same random index gets a random char
        var randomChar = alph[randIndex];
        console.log(randomChar);


        document.addEventListener('keydown', function (event) {
            if (alph.indexOf(event.key) == -1) {
                return;
            }
            if (event.key == randomChar) {
                wins++;
                pWins.innerHTML = wins;
                sofar = sofar + ', ' + event.key;
                pGuess.innerHTML = sofar;
                function myFunction(){
                    left = 9;
                    pLeft.innerHTML = left;
                    sofar = '';
                    randIndex = Math.floor(Math.random() * alph.length);
                    randomChar = alph[randIndex];
                    console.log(randomChar);
                }
                alert("You won");
                onclick = myFunction();
                return;
            }
            console.log(event.key);
            if (sofar == "") {
                sofar = sofar + event.key;
            }
            else {
                sofar = sofar + ', ' + event.key;
            }
            pGuess.innerHTML = sofar;
            left--;
            pLeft.innerHTML = left;
            if (left < 0) {
                left = 9;
                sofar = "";
                losses++;
                pLeft.innerHTML = left;
                pLoss.innerHTML = losses;
                pGuess.innerHTML = sofar;
                //test comment
            }
        })
    </script>

</body>

</html>